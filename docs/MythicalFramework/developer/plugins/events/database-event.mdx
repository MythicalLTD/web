---
id: database-event
---

# Database Event

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution This is a core component
Avoid making plugins listen to this even or add code to it because it may brick the connection to the database ;)
:::

<Tabs>
<TabItem value='onConnectPDO' label='onConnectPDO' default>
    Name: `database.onConnectPDO`

    Description: `When the the app connects to MySQL!`

    ```php title='Example'
    $eventHandler->on('database.onConnectPDO', function ($pdo) {
        //Use it for mysql connections with pdo...
    });
    ```

    Arguments:

    | Name | Description | Type |
    |------|-------------|------|
    | `$pdo` | The pdo connection | `\PDO` |

</TabItem>

<TabItem value='onConnectMYSQLI' label='onConnectMYSQLI' default>
    Name: `database.onConnectMYSQLI`

    Description: `When the the app connects to MySQL!`

    ```php title='Example'
    $eventHandler->on('database.onConnectMYSQLI', function ($mysqli) {
        //Use it for mysql connections with mysqli...
    });
    ```

    Arguments:

    | Name | Description | Type |
    |------|-------------|------|
    | `$mysqli` | The mysqli connection | `\mysqli` |

</TabItem>

<TabItem value='ontryConnection' label='ontryConnection' default>
    Name: `database.ontryConnection`

    Description: `When the the app try's connects to MySQL!`

    ```php title='Example'
    $eventHandler->on('database.ontryConnection', function () {
        //IDK Why you want this event...
    });
    ```

    Arguments:
    - None ;)

</TabItem>
<TabItem value='onRequestLock' label='onRequestLock' default>
    Name: `database.onRequestLock`

    Description: `When a lock request is made for a record`

    ```php title='Example'
    $eventHandler->on('database.onRequestLock', function ($table, $id) {
        //Try to lock a record
    });
    ```

    Arguments:

    | Name | Description | Type |
    |------|-------------|------|
    | `$table` | The table name | `string` |
    | `$id` | The record id | `string` |

</TabItem>

<TabItem value='onRequestUnlock' label='onRequestUnlock' default>
    Name: `database.onRequestUnlock`

    Description: `When an unlock request is made for a record`

    ```php title='Example'
    $eventHandler->on('database.onRequestUnlock', function ($table, $id) {
        //Try to unlock a record
    });
    ```

    Arguments:

    | Name | Description | Type |
    |------|-------------|------|
    | `$table` | The table name | `string` |
    | `$id` | The record id | `string` |

</TabItem>

<TabItem value='onGetLockStatus' label='onGetLockStatus' default>
    Name: `database.onGetLockStatus`

    Description: `When a lock status request is made for a record`

    ```php title='Example'
    $eventHandler->on('database.onGetLockStatus', function ($table, $id, $locked) {
        //Get the lock status of a record
    });
    ```

    Arguments:

    | Name | Description | Type |
    |------|-------------|------|
    | `$table` | The table name | `string` |
    | `$id` | The record id | `string` |
    |`$locked`| Is it locked| `bool`|

</TabItem>
</Tabs>
